<!-- Plan Poker Room Content -->
<div id="plan-poker-content" class="container">
  <!-- Room Info Bar -->
  <div class="room-info-bar">
    <div class="room-link-section">
      <span class="room-link-label">Share this link:</span>
      <input type="text" id="roomLink" class="room-link-input" readonly value="<%= roomUrl %>" />
      <button id="copyLinkBtn" class="copy-link-btn" title="Copy link">
        ğŸ“‹
      </button>
    </div>
    <div class="room-timer" id="roomTimer">
      <span class="timer-icon">â±ï¸</span>
      <span id="timerDisplay">10:00</span>
    </div>
  </div>

  <!-- Task Info Section -->
  <section class="task-section">
    <div class="form-group">
      <label class="form-label" for="taskTitle">Task Title</label>
      <input
        type="text"
        id="taskTitle"
        class="form-input"
        placeholder="e.g., Implement user authentication"
        readonly
        value="<%= room.taskTitle %>"
        autocomplete="off"
      />
    </div>
    <div class="form-group">
      <label class="form-label" for="taskDescription">Description / Links</label>
      <textarea
        id="taskDescription"
        class="form-input"
        readonly
        placeholder="Add any relevant links, Jira tickets, or additional context..."
      ><%= room.taskDescription || '' %></textarea>
    </div>
  </section>

  <!-- Members Section -->
  <section class="members-section">
    <h2 class="section-title">Team Members</h2>
    <div class="members-grid" id="membersGrid">
      <!-- Members will be populated by JavaScript -->
    </div>
  </section>

  <!-- Cards Selection Section -->
  <section class="cards-section" id="cardsSection">
    <h2 class="section-title">Select Your Estimate <span>*</span></h2>

    <div class="cards-grid" id="cardsGrid">
      <!-- Cards will be generated by JavaScript -->
    </div>

    <div class="validation-error" id="validationError">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="currentColor"
      >
        <path
          fill-rule="evenodd"
          d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z"
          clip-rule="evenodd"
        />
      </svg>
      <span>Please select a point estimate</span>
    </div>
  </section>

  <!-- Selection Display -->
  <div class="selection-display" id="selectionDisplay">
    <p class="selection-placeholder">ğŸ‘† Pick a card to estimate</p>
  </div>

  <!-- Results Section (shown after reveal) -->
  <div class="results-section" id="resultsSection" style="display: none;">
    <h2 class="section-title">ğŸ‰ Results</h2>
    <div class="results-content">
      <div class="average-display" id="averageDisplay">
        <span class="average-label">Average</span>
        <span class="average-value" id="averageValue">-</span>
      </div>
      <div class="votes-breakdown" id="votesBreakdown">
        <!-- Vote breakdown will be populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <section class="submit-section">
    <button class="submit-btn" id="submitBtn">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="currentColor"
      >
        <path
          fill-rule="evenodd"
          d="M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z"
          clip-rule="evenodd"
        />
      </svg>
      Submit Estimate
    </button>

    <!-- Admin Controls -->
    <div class="admin-controls" id="adminControls" style="<%= userSession.isAdmin ? '' : 'display: none;' %>">
      <button class="reveal-btn" id="revealBtn">
        ğŸ‘ï¸ Reveal Votes
      </button>
      <button class="reset-btn" id="resetBtn" style="display: none;">
        ğŸ”„ New Round
      </button>
      <button class="end-btn" id="endBtn">
        ğŸ›‘ End Session
      </button>
    </div>
  </section>
</div>

<!-- Room data passed to JavaScript via data attributes -->
<div id="room-data"
  data-room-id="<%= room.id %>"
  data-task-title="<%= room.taskTitle %>"
  data-task-description="<%= (room.taskDescription || '').replace(/"/g, '&quot;') %>"
  data-admin-name="<%= room.adminName %>"
  data-user-name="<%= userSession.name %>"
  data-is-admin="<%= userSession.isAdmin %>"
  style="display: none;"
></div>